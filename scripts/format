#!/usr/bin/env bash

set -e

bun x prettier --write "**/*.{js,jsx,ts,tsx,json,md,yaml,yml}"

# Check for changes (excluding workflow files which require special permissions)
if ! git diff --quiet HEAD -- . ':!.github/workflows/'; then
    git add -A -- . ':!.github/workflows/'
    git commit -m "auto: format code"
    git push origin HEAD
    echo "pushed changes"
else
    echo "no changes"
fi
